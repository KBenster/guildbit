{% extends"layout/base.html" %}

{% block title %}{{ _('Upgrades') }}{% endblock %}

{% block body %}
  <div class="content" xmlns="http://www.w3.org/1999/html">
        <h1>{{ _('Upgrades') }}</h1>

        <h3>15 slots not enough? Purchase one of the upgrade packages below &mdash; No subscription or registration required!</h3>
        <p>Each package comes with a SuperUser account to administer your server, users, channels and
          <a href="https://wiki.mumble.info/wiki/ACL_and_Groups/English" target="_BLANK">ACLs</a>.
          <a href="https://wiki.mumble.info/wiki/ACL_and_Groups/English" target="_BLANK">Learn more about SuperUser and ACLs here</a>.</p>


        <div class="pure-g">
          <div class="pure-u-1-1 pure-u-md-1-3">
            <ul class="pricing-chart">
              <li class="title">ü•â Bronze</li>
              <li class="price btc" data-btc="2.00">$2.00</li>
              <li class="desc">50 Slots &mdash; 7 Days</li>
              <li class="bullet-item">Persistent Server & Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="bullet-item">SuperUser Admin</li>
              <li class="cta-button">
                <div id="paypal-button-container-0"></div>
                <!-- <script async src="/static/js/libs/paypal.js?merchant=UYN9SV4FS6NXU"
                        data-button="buynow"
                        data-size="small"
                        data-type="form"
                        data-name="Bronze"
                        data-amount="2.00"
                        data-currency="USD"
                        data-no_shipping="1"
                        data-callback="https://guildbit.com/payment/paypal-gateway"
                        data-return="https://guildbit.com/payment/success"
                        data-rm="1"></script>
              </li> -->
            </ul>
          </div>
          <div class="pure-u-1-1 pure-u-md-1-3">
            <ul class="pricing-chart">
              <li class="title">ü•à Silver</li>
              <li class="price btc" data-btc="3.00">$3.00</li>
              <li class="desc">50 Slots &mdash; 14 Days</li>
              <li class="bullet-item">Persistent Server & Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="bullet-item">SuperUser Admin</li>
              <li class="cta-button">
                <div id="paypal-button-container-1"></div>
                <!-- <script async src="/static/js/libs/paypal.js?merchant=UYN9SV4FS6NXU"
                        data-button="buynow"
                        data-size="small"
                        data-type="form"
                        data-name="Silver"
                        data-amount="3.00"
                        data-currency="USD"
                        data-no_shipping="1"
                        data-callback="https://guildbit.com/payment/paypal-gateway"
                        data-return="https://guildbit.com/payment/success"
                        data-rm="1"
                        data-host="www.paypal.com"></script> -->
              </li>
            </ul>
          </div>
          <div class="pure-u-1-1 pure-u-md-1-3">
            <ul class="pricing-chart">
              <li class="title">üèÖ Gold</li>
              <li class="price btc" data-btc="5.00">$5.00</li>
              <li class="desc">50 Slots &mdash; 30 Days</li>
              <li class="bullet-item">Persistent Server & Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="bullet-item">SuperUser Admin</li>
              <li class="cta-button">
                <div id="paypal-button-container-2"></div>
                <!-- <script async src="/static/js/libs/paypal.js?merchant=UYN9SV4FS6NXU"
                        data-button="buynow"
                        data-size="small"
                        data-type="form"
                        data-name="Gold"
                        data-amount="5.00"
                        data-currency="USD"
                        data-no_shipping="1"
                        data-callback="https://guildbit.com/payment/paypal-gateway"
                        data-return="https://guildbit.com/payment/success"
                        data-rm="1"
                        data-host="www.paypal.com"></script> -->
              </li>
            </ul>
          </div>

          {% if config['DEBUG'] or request.args.get('test') %}
          <div class="pure-u-1-3">
            <ul class="pricing-chart">
              <li class="title">TEST</li>
              <li class="price">$0.01</li>
              <li class="desc">10 Slots &mdash; 2 Days</li>
              <li class="bullet-item">Persistent Server & Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="bullet-item">SuperUser Admin</li>
              <li class="cta-button">
                <!-- <div id="paypal-button-container-3"></div> -->
                <!-- <script async src="/static/js/libs/paypal.js?merchant=alf.g.jr@gmail.com"
                        data-button="buynow"
                        data-size="small"
                        data-type="form"
                        data-name="TEST"
                        data-amount="0.01"
                        data-currency="USD"
                        data-no_shipping="1"
                        data-callback="https://webhook.site/6f937e46-cb8e-495c-8a21-d9d74e6900f8"
                        data-return="https://guildbit.com/payment/success"
                        data-rm="1"
                        data-host="www.sandbox.paypal.com"></script> -->
              </li>
            </ul>
          </div>
          {% endif %}
        </div>

        <span class="">**After purchase, an email will be sent with a unique link to create and configure your server.</span>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://www.paypal.com/sdk/js?client-id=Acvqv_7VaW1yO_oQmFvDPWwhgsZY2QCwqApzEeSGibAJeYaK6v5ekshyTpwyZCDTFxkWx6hnGQOGebAA&currency=USD&disable-funding=credit" data-sdk-integration-source="button-factory"></script>
  <script>
    function createPayPalButton(item) {
      paypal.Buttons({
        style: {
          shape: 'rect',
          color: 'blue',
          layout: 'vertical',
          label: 'paypal',
        },

        createOrder: function(data, actions) {
          return actions.order.create({
            purchase_units: [{
              "description": item.desc,
              "amount": {
                "currency_code": "USD",
                "value": item.value
              }
            }]
          });
        },

        onApprove: function(data, actions) {
          window.location = '/payment/success';
          return actions.order.capture().then(function(details) {
            console.log(details);
          });
        },

        onError: function(err) {
          console.log(err);
        }
      }).render('#paypal-button-container-' + item.id);
    }

    var buttons = [
      { id: 0, desc: 'Bronze', value: 2 },
      { id: 1, desc: 'Silver', value: 3 },
      { id: 2, desc: 'Gold', value: 5 },
    ];

    {% if config['DEBUG'] or request.args.get('test') %}
      buttons.push({ id: 3, value: 0.01 });
    {% endif %}

    for (var i = 0; i < buttons.length; i++) {
      createPayPalButton(buttons[i]);
    }
  </script>
{% endblock %}
