{% extends"layout/base.html" %}

{% block title %}{{ _('Upgrades') }}{% endblock %}

{% block body %}
    <div class="content">
        <div class="default alert centered text-center">Bitcoin purchases are in beta. If you
          have any issues, please <a href="/contact">contact support</a>.</div>
        <h1>{{ _('Upgrades (via Bitcoin)') }}</h1>

        <h3>10 slots not enough? Purchase one of the upgrade packages below &mdash; No subscription or registration required!</h3>

        <div class="pure-g">
          <div class="pure-u-1-3">
            <ul class="pricing-chart">
              <li class="title">Package A</li>
              <li class="price btc" data-btc="2.00">$2.00</li>
              <li class="desc">25 Slots &mdash; 7 Days</li>
              <li class="bullet-item">Persistent Server</li>
              <li class="bullet-item">Reserved Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="cta-button">
                <a id="package-A" class="pure-button pure-button-primary"><i class="fa fa-bitcoin"></i> Pay with Bitcoin</a>
              </li>
            </ul>

          </div>
          <div class="pure-u-1-3">
            <ul class="pricing-chart">
              <li class="title">Package B</li>
              <li class="price btc" data-btc="3.00">$3.00</li>
              <li class="desc">25 Slots &mdash; 14 Days</li>
              <li class="bullet-item">Persistent Server</li>
              <li class="bullet-item">Reserved Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="cta-button">
                <a id="package-B" class="pure-button pure-button-primary"><i class="fa fa-bitcoin"></i> Pay with Bitcoin</a>
              </li>
            </ul>
          </div>
          <div class="pure-u-1-3">
            <ul class="pricing-chart">
              <li class="title">Package C</li>
              <li class="price btc" data-btc="5.00">$5.00</li>
              <li class="desc">25 Slots &mdash; 30 Days</li>
              <li class="bullet-item">Persistent Server</li>
              <li class="bullet-item">Reserved Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="cta-button">
                  <a id="package-C" class="pure-button pure-button-primary"><i class="fa fa-bitcoin"></i> Pay with Bitcoin</a>
              </li>
            </ul>
          </div>


          {% if config['DEBUG'] or request.args.get('test') %}
          <div class="pure-u-1-3">
            <ul class="pricing-chart">
              <li class="title">Package TEST</li>
              <li class="price">0.0001 BTC</li>
              <li class="desc">10 Slots &mdash; 2 Days</li>
              <li class="bullet-item">Persistent Server</li>
              <li class="bullet-item">Reserved Port</li>
              <li class="bullet-item">Sub-channels</li>
              <li class="cta-button">
                <a id="package-TEST" class="pure-button pure-button-primary"><i class="fa fa-bitcoin"></i> Pay with Bitcoin</a>
              </li>
            </ul>
          </div>
          {% endif %}
        </div>

        <span>*BTC rates shown above are approximate. Actual amount will be displayed on checkout.</span><br />
        <span class="">**After purchase, an email will be sent with a unique link to create and configure your server.</span>

  <div class="coinbase-button" data-code="8b56a30cc10d6352bb65c5622f806f6d" data-button-style="none"></div>
  <div class="coinbase-button" data-code="c88bd7eb6f77d5e7563978a603ea1611" data-button-style="none"></div>
  <div class="coinbase-button" data-code="30368d8afc4bffeeba4132157da28c1f" data-button-style="none"></div>


  {% if config['DEBUG'] or request.args.get('test') %}
    <div class="coinbase-button" data-code="85019c5bc0ab8db5e94e8f7b4ae26d2c" data-button-style="none"></div>
  {% endif %}

{% endblock %}

{% block scripts %}
  <script src="https://coinbase.com/assets/button.js" type="text/javascript"></script>
  <script src="/static/js/libs/jquery.btc.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      // Activate jquery-btc
      $('.btc').btc();

      // Coinbase click events for button.js
      $('#package-A').click(function(){
        $(document).trigger('coinbase_show_modal', '8b56a30cc10d6352bb65c5622f806f6d');
        return false;
      });

      $('#package-B').click(function(){
        $(document).trigger('coinbase_show_modal', 'c88bd7eb6f77d5e7563978a603ea1611');
        return false;
      });

      $('#package-C').click(function(){
        $(document).trigger('coinbase_show_modal', '30368d8afc4bffeeba4132157da28c1f');
        return false;
      });

      {% if config['DEBUG'] or request.args.get('test') %}
      $('#package-TEST').click(function(){
        $(document).trigger('coinbase_show_modal', '85019c5bc0ab8db5e94e8f7b4ae26d2c');
        return false;
      });
      {% endif %}

      $(document).on('coinbase_payment_complete', function(event, code){
        console.log("Payment completed for button "+code);
        window.location = "/payment/success";
      });
    });
  </script>
{% endblock %}